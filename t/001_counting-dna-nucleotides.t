#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;
use Test::More tests=>2;

our @NT = qw(A C G T);

subtest 'sample data' => sub{
  my %expected = (
    'AGCTTTTCATTCTGACTGCAACGGGCAATATGTCTCTGTGTGGATTAAAAAAAGAGTGTCTGATAGCAGC' => "20 12 17 21",
  );

  plan tests => scalar(keys(%expected));

  while(my($dna,$exp) = each(%expected)){
    my $obs = countNts($dna);
    is($obs, $exp, $dna);
  }
};

subtest 'real data' => sub{
  while(<DATA>){
    chomp;
    my $exp = "212 259 220 201";
    my $obs = countNts($_);
    is($obs, $exp, $_);
  }
};

sub countNts{
  my($dna) = @_;

  my $count = "";

  for my $nt(@NT){
    my $c = () = $dna=~/$nt/g;
    $count .= "$c ";
  }
  $count =~ s/\s+$//;

  return $count;
}

__DATA__
TGCTGTCGGCGGGAGTCTCAGAATACGCGTTAAGCGCAAGATGTGCGCCCGAACGCATCACAGAGGTTATCCTTATGGGCTGAGCCGCTTGCTGCCTTTTATTCTATGAATTCTGCGGGTTCAAAGCCACCATGCTTCGATTTTTTATCCTCCACTTTGAGAACGGAGGTTGCAAGTCCCATGCAGGCATTGTCTTCGATGTGACTACAACTAGCCTTAAGCAGCTCAACCCACCGGTCAACACTCCGCGTCCCGAACACTCCTAGCGGTACTTCCTTGAACCTGTGGCCTTGACTCCGGTCCGGCCAGCGGTTAACTTACTACCGCTGTCCGAGCTGACCACACTAGAACCCCGCGGCGGACAAAGAGACGATCACGGGGATACAGTGAGAGATAAGCGGCCCTATCCGCCCCCCTTGACTACTTCCCCGCATTTGGCGTGCTACCACCCGAAAACCCCCGGACGAATTCCTCATGTGCCAAGCACACTCTGGAAGTTATGCGCTTGGATGTATCGGAAGCGTGATAGCCAAGATGCCCGAAGCGCGGCGGATGCCCCCTAAATCAAAATCTGTGTTCTTCCATTGCGCTAGGTAGAGAATAGCTTTAACGTATTTCCGAATCGCCTGCCTACCTGTCCTGAAAGACTCACGTTGGCTGTGCCTTATCCAGCCGCGATGTCGGCGCGCGAAGGGGATACTCAGCCATGCACAATGTAACTAGATCGAGGATTTAGACAAGGCCCCGGGTATGACTCGTCATATGGCATAGAGCCCAAGAATGAAACTAGTCTGACACACTGATTGTCATGTCACGGACGGCTCGTGGAGCACCCTCTATGGACGGCAACACCTAAAACACCTTGACGGTAGGGTCCAGCTATCAGACACTG
